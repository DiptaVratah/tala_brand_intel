<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PulseCraft: The Consciousness Interface</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="enhancement.css">
    <link rel="stylesheet" href="shapeshifter.css">
    <link rel="stylesheet" href="progressive.css"> 
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <div id="toastContainer" class="fixed bottom-4 right-4 z-50 space-y-2"></div>

    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="spinner"></div>
        <p class="loading-text">Reflecting truth...</p>
    </div>

    <div class="container" data-phase="1">
        <div class="phase phase-1 active">
            <h1 class="main-title">PulseCraft</h1>
            <p class="tagline">"Most tools give you templates. This one gives you yourself."</p>
            
            <div class="section mirror-section">
                <h2>Mirror Your Voice</h2>
                <p class="mirror-instruction">Enter your authentic expression below. A mission statement, a heartfelt email, a piece of your truth.</p>
                <textarea id="brandVoiceInput" rows="6" placeholder="Share your clearest signal..."></textarea>
                <button class="btn-primary mirror-button" id="mirrorVoiceButton">
                    <span class="mirror-icon"></span><span class="btn-text">Mirror My Voice</span>
                </button>
            </div>
        </div>

        <div class="phase phase-2 hidden">
            <div class="section recognition-section">
                <h2>Your Voice Revealed</h2>
                <div id="mirroredVoiceOutput" class="voice-reflection-output">
                    <div class="voice-attribute" data-attribute="tone">
                        <strong>Tone:</strong><span id="outputTone">Awaiting reflection...</span>
                    </div>
                    <div class="voice-attribute" data-attribute="vocabulary">
                        <strong>Vocabulary:</strong><span id="outputVocabulary">Awaiting reflection...</span>
                    </div>
                    <div class="voice-attribute" data-attribute="archetype">
                        <strong>Archetype:</strong><span id="outputArchetype">Awaiting reflection...</span>
                    </div>
                    <div class="voice-attribute" data-attribute="phrasing">
                        <strong>Phrasing Style:</strong><span id="outputPhrasingStyle">Awaiting reflection...</span>
                    </div>
                    <div class="voice-attribute" data-attribute="samples">
                        <strong>Sample Phrases:</strong><span id="outputSamplePhrases">Awaiting reflection...</span>
                    </div>
                    <div class="voice-attribute" data-attribute="avoid">
                        <strong>Phrases to Avoid:</strong><span id="outputPhrasesToAvoid">Awaiting reflection...</span>
                    </div>
                </div>
            </div>

            <div class="section dna-section">
                <div class="dna-container">
                    <h3>DNA TAGS</h3>
                    <p>Your voice's unique essence markers</p>
                    <div id="dnaTagsContainer" class="tag-container">
                        <p class="placeholder-text">Your DNA tags will crystallize here...</p>
                    </div>
                </div>
                
                <div class="symbol-container">
                    <h3>SYMBOL ANCHORS</h3>
                    <p>Deeper resonance points of your expression</p>
                    <div id="symbolAnchorsContainer" class="tag-container">
                        <p class="placeholder-text">Your symbol anchors will emerge here...</p>
                    </div>
                </div>
            </div>

            <div class="section save-section">
                <h3>Crystallize This Frequency</h3>
                <input type="text" id="brandNameInput" placeholder="Name this voice signature...">
                <button class="btn-primary" id="saveToMemoryButton">Save Voice Kit</button>
                <p class="save-hint">Save your voice to unlock content generation capabilities</p>
            </div>
        </div>

        <div class="phase phase-3 hidden">
            <div class="section expansion-section full-width">
                <h2>Creation Studio</h2>
                <p>Generate content using your crystallized voice.</p>
                
                <div class="generation-controls">
                    <textarea id="contentGenerationInput" rows="6" 
                        placeholder="What do you want to create? (e.g., 'Write a story about...', 'Draft a strategy for...', 'Write a LinkedIn post...')"></textarea>
                    
                    <button class="btn-primary" id="writeItForMeButton">
                        <i class="fas fa-pen-nib"></i> Generate Content
                    </button>
                </div>
                
                <div id="generatedContentOutput" class="generated-output" style="display:none; margin-top: 1.5rem; padding: 1.5rem; border: 1px solid #e2e8f0; border-radius: 8px; min-height: 100px; background: #fff;"></div>
            </div>

            <div class="section library-preview">
                <h3>Your Voice Library</h3>
                <select id="sessionSelect">
                    <option value="" selected disabled>Select a saved voice</option>
                </select>
                <button class="btn-secondary" id="recallButton">Recall Voice</button>
            </div>
        </div>

        <div class="phase phase-4 hidden">
            <div class="section alchemy-section full-width">
                <h2>Voice Alchemy</h2>
                <p>Combine multiple voice signatures to discover emergent frequencies.</p>
                <div id="previewGalleryGrid" class="collective-preview-gallery"></div>
                <button class="btn-secondary" id="refineKitsButton">Alchemize Selected Voices</button>
            </div>

            <div class="section tools-section">
                <h3>Voice Data Tools</h3>
                <div class="button-group">
                    <button class="btn-export-json" id="exportAllKitsJSONButton">Export Library</button>
                    <button class="btn-export-pdf" id="exportPDFButton">Export Report</button>
                    <button class="btn-export-txt" id="exportTXTButton">Export Summary</button>
                </div>
                <div class="import-section">
                    <input type="file" id="importMemoryFile" accept=".json" class="hidden-file-input">
                    <button class="btn-secondary" id="uploadMemoryBridgeButton">Import Memory Bridge</button>
                </div>
            </div>
        </div>

        <div class="phase phase-5 hidden">
            <div class="section observatory-section full-width">
                <h2 class="observatory-title">The Observatory</h2>
                <p class="observatory-subtitle">Witness the trajectory of your soul.</p>

                <!-- Row 1: Resonance Gauge (Full Width, Centered) -->
                <div class="dashboard-card resonance-card">
                    <div class="resonance-header">
                        <span class="resonance-label">Voice Resonance</span>
                        <span class="status-badge" id="driftStatusBadge">Calculating...</span>
                    </div>
                    <div class="resonance-body">
                        <div class="gauge-wrapper">
                            <svg class="drift-gauge" viewBox="0 0 120 70">
                                <defs>
                                    <linearGradient id="gaugeGradientHigh" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#10b981"/>
                                        <stop offset="100%" style="stop-color:#34d399"/>
                                    </linearGradient>
                                </defs>
                                <path d="M 15 55 A 45 45 0 0 1 105 55" class="gauge-bg"/>
                                <path d="M 15 55 A 45 45 0 0 1 105 55" class="gauge-fill" id="driftGaugeFill"/>
                                <text x="60" y="52" text-anchor="middle" class="drift-score" id="driftScoreDisplay">--%</text>
                            </svg>
                        </div>
                        <p class="drift-insight" id="driftInsightText">Awaiting signal analysis...</p>
                    </div>
                </div>

                <!-- Row 2: Four Metric Cards (2x2 Grid) -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-icon tension-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="metric-content">
                            <div class="metric-header">
                                <span class="metric-label">Cognitive Tension</span>
                                <span class="metric-value" id="metaTension">--</span>
                            </div>
                            <div class="metric-bar">
                                <div class="metric-bar-fill tension" id="metaTensionBar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-icon cadence-icon">
                            <i class="fas fa-heart-pulse"></i>
                        </div>
                        <div class="metric-content">
                            <div class="metric-header">
                                <span class="metric-label">Emotional Cadence</span>
                                <span class="metric-value" id="metaCadence">--</span>
                            </div>
                            <div class="metric-bar">
                                <div class="metric-bar-fill cadence" id="metaCadenceBar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-icon stability-icon">
                            <i class="fas fa-shield-halved"></i>
                        </div>
                        <div class="metric-content">
                            <div class="metric-header">
                                <span class="metric-label">Stability Band</span>
                                <span class="metric-value" id="metaStability">--</span>
                            </div>
                            <div class="metric-bar">
                                <div class="metric-bar-fill stability" id="metaStabilityBar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="metric-card">
                        <div class="metric-icon evolution-icon">
                            <i class="fas fa-arrows-spin"></i>
                        </div>
                        <div class="metric-content">
                            <div class="metric-header">
                                <span class="metric-label">Evolution State</span>
                                <span class="metric-value" id="metaEvolution">--</span>
                            </div>
                            <div class="metric-bar">
                                <div class="metric-bar-fill evolution" id="metaEvolutionBar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Row 3: Timeline & Activity Side by Side -->
                <div class="dashboard-bottom-grid">
                    <div class="dashboard-card timeline-card">
                        <div class="card-title">
                            <i class="fas fa-route"></i>
                            <span>Archetypal Trajectory</span>
                        </div>
                        <div class="timeline-container" id="evolutionTimeline">
                            <p class="placeholder-text">Your journey is being mapped...</p>
                        </div>
                    </div>

                    <div class="dashboard-card history-card">
                        <div class="card-title">
                            <i class="fas fa-clock-rotate-left"></i>
                            <span>Activity Stream</span>
                        </div>
                        <div class="history-feed" id="historyFeedContainer">
                        </div>
                    </div>
                </div>

                <button id="refreshDashboardButton">
                    <i class="fas fa-sync-alt"></i> Refresh Observatory
                </button>
            </div>
        </div>

        <footer class="phase-footer">
            <p id="footerText">Begin your journey...</p>
        </footer>
    </div>

    <div style="display: none;">
        <div id="yourPastSignalsContent"></div>
        <button id="exportCurrentVoiceJSONButton"></button>
        <button id="exportSymbolicMemoryButton"></button>
        <button id="clearAllSavedKitsButton"></button>
    </div>

    <div id="welcomeBanner" class="hidden"></div>
 
    <script src="shapeshifter.js"></script>
    <script src="script.js"></script>
    <script src="progressive.js"></script>
</body>
</html>